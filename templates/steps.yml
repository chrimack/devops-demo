parameters:
  - name: text
    type: string
    default: doing stuff...

  - name: tag
    type: string
    default: working

variables:
  loop: for i in {1..10}; do echo ${{ parameters.text }}; sleep .5; done;

steps:

  - bash: |
    echo 'npm ci'
    ${{ variables.loop }}
  displayName: Install frontend dependencies

  - bash: |
    echo 'npm run test'
    ${{ variables.loop }}
  displayName: Run frontend tests

  - script: echo '##vso[build.addbuildtag]${{ parameters.tag }}
  displayName: add environment tag
